pipeline {
    agent any
    tools {
        maven 'M3'
    }
    stages {

        stage('Build') {
            steps {
               dir("retwisj"){
                       sh 'mvn -Dmaven.test.failure.ignore clean package'
               }
            }
        }
         stage('Docker') {
            steps {
                   sh '/usr/bin/docker build -t retwisj:latest .'
                   sh 'docker tag retwisj:latest luca83000/retwisj:latest'
                   sh "docker login -u luca83000 -p mewti83000"
                   sh 'docker push luca83000/retwisj:latest'
            }
        }
    }
}